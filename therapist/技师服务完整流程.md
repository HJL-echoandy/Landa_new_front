# æŠ€å¸ˆæœåŠ¡å®Œæ•´æµç¨‹å›¾

## ğŸ“± ä¸»æµç¨‹å›¾

```mermaid
graph TB
    Start[è®¢å•åˆ—è¡¨é¡µé¢<br/>OrdersScreen] --> CheckStatus{è®¢å•çŠ¶æ€}
    
    CheckStatus -->|pending å¾…æ¥å•| Accept[ç‚¹å‡»æ¥å•æŒ‰é’®]
    CheckStatus -->|confirmed å·²ç¡®è®¤| Navigate1[ç‚¹å‡»å¼€å§‹å¯¼èˆª]
    CheckStatus -->|en_route å·²å‡ºå‘| Navigate2[å¯¼èˆªé¡µé¢]
    CheckStatus -->|in_progress æœåŠ¡ä¸­| InProgress[æœåŠ¡è¿›è¡Œä¸­é¡µé¢]
    CheckStatus -->|completed å·²å®Œæˆ| Completed[æ˜¾ç¤ºå·²å®Œæˆ]
    
    Accept --> Accepted{æ¥å•æˆåŠŸ?}
    Accepted -->|æ˜¯| OrderDetails[è®¢å•è¯¦æƒ…é¡µ<br/>OrderDetailsScreen]
    Accepted -->|å¦| Start
    
    OrderDetails --> Navigate1
    
    Navigate1 --> NavScreen[å¯¼èˆªé¡µé¢<br/>NavigationScreen]
    Navigate2 --> NavScreen
    
    NavScreen --> NavStatus{å½“å‰æ­¥éª¤}
    
    NavStatus -->|æ­¥éª¤1: å·²ç¡®è®¤| ArriveBtn[æ˜¾ç¤ºåˆ°è¾¾æ‰“å¡æŒ‰é’®]
    NavStatus -->|æ­¥éª¤2: å·²å‡ºå‘| StartBtn[æ˜¾ç¤ºå¼€å§‹æœåŠ¡æŒ‰é’®]
    NavStatus -->|æ­¥éª¤3: æœåŠ¡ä¸­| CompleteBtn[æ˜¾ç¤ºå®ŒæˆæœåŠ¡æŒ‰é’®]
    
    ArriveBtn --> ClickArrive[ç‚¹å‡»åˆ°è¾¾æ‰“å¡]
    ClickArrive --> CheckIn1[æ‰“å¡é¡µé¢<br/>CheckInScreen<br/>type: arrived]
    
    CheckIn1 --> GetLocation1{è·å–ä½ç½®}
    GetLocation1 -->|æˆåŠŸ| Checkin1Success[æ‰“å¡æˆåŠŸ<br/>çŠ¶æ€: confirmed â†’ en_route]
    GetLocation1 -->|å¤±è´¥| LocationPrompt1{ç”¨æˆ·é€‰æ‹©}
    LocationPrompt1 -->|ä½¿ç”¨æ¨¡æ‹Ÿä½ç½®| Checkin1Success
    LocationPrompt1 -->|ç»§ç»­æ‰“å¡| Checkin1Success
    LocationPrompt1 -->|ç¨åå¤„ç†| CheckIn1
    
    Checkin1Success --> BackToNav1[è¿”å›å¯¼èˆªé¡µé¢]
    BackToNav1 --> NavScreen
    
    StartBtn --> ClickStart[ç‚¹å‡»å¼€å§‹æœåŠ¡]
    ClickStart --> CheckIn2[æ‰“å¡é¡µé¢<br/>CheckInScreen<br/>type: start]
    
    CheckIn2 --> GetLocation2{è·å–ä½ç½®}
    GetLocation2 -->|æˆåŠŸ| Checkin2Success[æ‰“å¡æˆåŠŸ<br/>çŠ¶æ€: en_route â†’ in_progress]
    GetLocation2 -->|å¤±è´¥| LocationPrompt2{ç”¨æˆ·é€‰æ‹©}
    LocationPrompt2 -->|ä½¿ç”¨æ¨¡æ‹Ÿä½ç½®| Checkin2Success
    LocationPrompt2 -->|ç»§ç»­æ‰“å¡| Checkin2Success
    LocationPrompt2 -->|ç¨åå¤„ç†| CheckIn2
    
    Checkin2Success --> ServiceInProgress[æœåŠ¡è¿›è¡Œä¸­é¡µé¢<br/>ServiceInProgressScreen]
    
    ServiceInProgress --> ShowTimer[æ˜¾ç¤ºå€’è®¡æ—¶<br/>åŸºäºè®¢å•æœåŠ¡æ—¶é•¿]
    ShowTimer --> TimerRunning{å€’è®¡æ—¶ä¸­}
    TimerRunning -->|æ—¶é—´å……è¶³| ShowProgress[æ˜¾ç¤ºè¿›åº¦æ¡å’Œå‰©ä½™æ—¶é—´]
    TimerRunning -->|å°‘äº5åˆ†é’Ÿ| ShowWarning[ç§’æ•°æ˜¾ç¤ºçº¢è‰²è­¦å‘Š]
    TimerRunning -->|æ—¶é—´åˆ°| TimeUp[00:00:00]
    
    ShowProgress --> UserAction1{ç”¨æˆ·æ“ä½œ}
    ShowWarning --> UserAction1
    TimeUp --> UserAction1
    
    UserAction1 -->|ç‚¹å‡»å®ŒæˆæœåŠ¡| ClickComplete[ç‚¹å‡»å®ŒæˆæœåŠ¡æ‰“å¡]
    UserAction1 -->|ç»§ç»­æœåŠ¡| ShowTimer
    
    CompleteBtn --> ClickComplete2[ç‚¹å‡»å®ŒæˆæœåŠ¡]
    ClickComplete --> CheckIn3[æ‰“å¡é¡µé¢<br/>CheckInScreen<br/>type: complete]
    ClickComplete2 --> CheckIn3
    
    CheckIn3 --> GetLocation3{è·å–ä½ç½®}
    GetLocation3 -->|æˆåŠŸ| Checkin3Success[æ‰“å¡æˆåŠŸ<br/>çŠ¶æ€: in_progress â†’ completed]
    GetLocation3 -->|å¤±è´¥| LocationPrompt3{ç”¨æˆ·é€‰æ‹©}
    LocationPrompt3 -->|ä½¿ç”¨æ¨¡æ‹Ÿä½ç½®| Checkin3Success
    LocationPrompt3 -->|ç»§ç»­æ‰“å¡| Checkin3Success
    LocationPrompt3 -->|ç¨åå¤„ç†| CheckIn3
    
    Checkin3Success --> CustomerFeedback[å®¢æˆ·è¯„ä»·é¡µé¢<br/>CustomerFeedbackScreen]
    
    CustomerFeedback --> FillReview[å¡«å†™è¯„ä»·]
    FillReview --> Rating[1. é€‰æ‹©æ˜Ÿçº§è¯„åˆ† 1-5æ˜Ÿ]
    Rating --> Tags[2. é€‰æ‹©å¿«é€Ÿæ ‡ç­¾ å¤šé€‰]
    Tags --> Note[3. å¡«å†™ç§å¯†å¤‡æ³¨ å¯é€‰]
    Note --> Submit[ç‚¹å‡»æäº¤åé¦ˆ]
    
    Submit --> SaveReview{ä¿å­˜åˆ°æ•°æ®åº“}
    SaveReview -->|æˆåŠŸ| ShowSuccess[æ˜¾ç¤ºæˆåŠŸæç¤º]
    SaveReview -->|å¤±è´¥| ShowError[æ˜¾ç¤ºé”™è¯¯æç¤º]
    
    ShowSuccess --> BackToHome[è¿”å›è®¢å•é¦–é¡µ]
    ShowError --> CustomerFeedback
    
    BackToHome --> Start
    
    style Start fill:#e1f5fe
    style NavScreen fill:#fff9c4
    style ServiceInProgress fill:#f3e5f5
    style CustomerFeedback fill:#c8e6c9
    style CheckIn1 fill:#ffccbc
    style CheckIn2 fill:#ffccbc
    style CheckIn3 fill:#ffccbc
    style Checkin1Success fill:#81c784
    style Checkin2Success fill:#81c784
    style Checkin3Success fill:#81c784
    style ShowWarning fill:#ef5350
    style TimeUp fill:#ef5350
    style BackToHome fill:#4caf50
```

## ğŸ“Š è®¢å•çŠ¶æ€æµè½¬å›¾

```mermaid
stateDiagram-v2
    [*] --> pending: åˆ›å»ºè®¢å•
    
    pending --> confirmed: æŠ€å¸ˆæ¥å•
    pending --> cancelled: å–æ¶ˆè®¢å•
    
    confirmed --> en_route: åˆ°è¾¾æ‰“å¡
    confirmed --> cancelled: å–æ¶ˆè®¢å•
    
    en_route --> in_progress: å¼€å§‹æœåŠ¡æ‰“å¡
    en_route --> cancelled: å–æ¶ˆè®¢å•
    
    in_progress --> completed: å®ŒæˆæœåŠ¡æ‰“å¡
    
    completed --> [*]: æäº¤å®¢æˆ·è¯„ä»·
    cancelled --> [*]
    
    note right of pending
        çŠ¶æ€: å¾…æ¥å•
        æŠ€å¸ˆæ“ä½œ: æ¥å•/æ‹’ç»
    end note
    
    note right of confirmed
        çŠ¶æ€: å·²ç¡®è®¤
        æŠ€å¸ˆæ“ä½œ: å¼€å§‹å¯¼èˆª
        æ˜¾ç¤º: åˆ°è¾¾æ‰“å¡æŒ‰é’®
    end note
    
    note right of en_route
        çŠ¶æ€: å·²å‡ºå‘
        æŠ€å¸ˆæ“ä½œ: åˆ°è¾¾ç°åœº
        æ˜¾ç¤º: å¼€å§‹æœåŠ¡æŒ‰é’®
    end note
    
    note right of in_progress
        çŠ¶æ€: æœåŠ¡ä¸­
        æ˜¾ç¤º: å€’è®¡æ—¶å™¨
        æŠ€å¸ˆæ“ä½œ: å®ŒæˆæœåŠ¡
    end note
    
    note right of completed
        çŠ¶æ€: å·²å®Œæˆ
        æŠ€å¸ˆæ“ä½œ: è¯„ä»·å®¢æˆ·
        åç»­: è·³è½¬è¯„ä»·é¡µé¢
    end note
```

## â±ï¸ å€’è®¡æ—¶é€»è¾‘æµç¨‹å›¾

```mermaid
graph TB
    StartTimer[è¿›å…¥æœåŠ¡è¿›è¡Œä¸­é¡µé¢] --> LoadOrder[è·å–è®¢å•æ•°æ®]
    LoadOrder --> CheckData{æ£€æŸ¥æ•°æ®}
    
    CheckData -->|æœ‰ service_started_at| HasStart[æœ‰å¼€å§‹æ—¶é—´]
    CheckData -->|æœ‰ service_duration| HasDuration[æœ‰æœåŠ¡æ—¶é•¿]
    CheckData -->|ç¼ºå°‘æ•°æ®| ShowError[æ˜¾ç¤ºåŠ è½½ä¸­]
    
    HasStart --> HasDuration
    HasDuration --> CalcTime[è®¡ç®—æ—¶é—´]
    
    CalcTime --> GetStartTime[å¼€å§‹æ—¶é—´<br/>service_started_at]
    GetStartTime --> GetDuration[æœåŠ¡æ—¶é•¿<br/>service_duration åˆ†é’Ÿ]
    GetDuration --> ConvertDuration[è½¬æ¢ä¸ºç§’<br/>duration * 60]
    
    ConvertDuration --> Timer[å¯åŠ¨å®šæ—¶å™¨<br/>æ¯ç§’æ›´æ–°]
    
    Timer --> CalcElapsed[è®¡ç®—å·²ç»è¿‡æ—¶é—´<br/>elapsed = now - startTime]
    CalcElapsed --> CalcRemaining[è®¡ç®—å‰©ä½™æ—¶é—´<br/>remaining = duration - elapsed]
    CalcRemaining --> CheckRemaining{å‰©ä½™æ—¶é—´}
    
    CheckRemaining -->|> 0| ShowCountdown[æ˜¾ç¤ºå€’è®¡æ—¶<br/>HH:MM:SS]
    CheckRemaining -->|<= 0| ShowZero[æ˜¾ç¤º 00:00:00]
    
    ShowCountdown --> CalcProgress[è®¡ç®—è¿›åº¦<br/>progress = elapsed / duration * 100]
    CalcProgress --> ShowProgress[æ˜¾ç¤ºè¿›åº¦æ¡]
    ShowProgress --> CheckWarning{å‰©ä½™ <= 5åˆ†é’Ÿ?}
    
    CheckWarning -->|æ˜¯| ShowRed[ç§’æ•°æ˜¾ç¤ºçº¢è‰²]
    CheckWarning -->|å¦| ShowNormal[æ­£å¸¸é¢œè‰²]
    
    ShowRed --> Wait1[ç­‰å¾…1ç§’]
    ShowNormal --> Wait1
    ShowZero --> Wait1
    
    Wait1 --> Timer
    
    style CalcRemaining fill:#fff9c4
    style ShowCountdown fill:#c8e6c9
    style ShowRed fill:#ef5350
    style ShowZero fill:#ffccbc
```

## ğŸ—ºï¸ ä½ç½®è·å–æµç¨‹å›¾

```mermaid
graph TB
    Start[è¿›å…¥æ‰“å¡é¡µé¢] --> RequestPerm[è¯·æ±‚ä½ç½®æƒé™]
    
    RequestPerm --> CheckPerm{æƒé™çŠ¶æ€}
    CheckPerm -->|å·²æˆæƒ| CheckGPS{GPSæœåŠ¡}
    CheckPerm -->|æœªæˆæƒ| PermDenied[æƒé™è¢«æ‹’ç»]
    
    PermDenied --> MarkDecided1[æ ‡è®°ç”¨æˆ·å·²å†³å®š<br/>hasUserDecidedOnLocation = true]
    MarkDecided1 --> ShowPermAlert[æ˜¾ç¤º: æ‰“å¡æ—¶å°†ä½¿ç”¨é»˜è®¤åæ ‡]
    
    CheckGPS -->|å·²å¯ç”¨| GetLocation[è·å–å½“å‰ä½ç½®]
    CheckGPS -->|æœªå¯ç”¨| GPSDisabled[GPSæœªå¯ç”¨]
    
    GPSDisabled --> CheckDecided1{ç”¨æˆ·å·²å†³å®š?}
    CheckDecided1 -->|æ˜¯| SkipPrompt1[è·³è¿‡å¼¹çª—]
    CheckDecided1 -->|å¦| ShowGPSAlert{æ˜¾ç¤ºæç¤º}
    
    ShowGPSAlert -->|ç¨åå¤„ç†| MarkDecided2[æ ‡è®°å·²å†³å®š]
    ShowGPSAlert -->|å»è®¾ç½®| OpenSettings[æ‰“å¼€ç³»ç»Ÿè®¾ç½®]
    ShowGPSAlert -->|å…³é—­å¼¹çª—| MarkDecided3[æ ‡è®°å·²å†³å®š]
    
    OpenSettings --> MarkDecided2
    MarkDecided2 --> SkipPrompt1
    MarkDecided3 --> SkipPrompt1
    
    GetLocation --> LocationSuccess{è·å–æˆåŠŸ?}
    LocationSuccess -->|æˆåŠŸ| SaveLocation[ä¿å­˜ä½ç½®åæ ‡<br/>latitude, longitude]
    LocationSuccess -->|å¤±è´¥| CheckDecided2{ç”¨æˆ·å·²å†³å®š?}
    
    SaveLocation --> MarkDecided4[æ ‡è®°å·²å†³å®š]
    MarkDecided4 --> ShowSuccess[æ˜¾ç¤º: ä½ç½®è·å–æˆåŠŸ]
    
    CheckDecided2 -->|æ˜¯| SkipPrompt2[è·³è¿‡å¼¹çª—]
    CheckDecided2 -->|å¦| ShowLocationAlert{æ˜¾ç¤ºæç¤º}
    
    ShowLocationAlert -->|ç¨åæ‰“å¡æ—¶å†è¯•| MarkDecided5[æ ‡è®°å·²å†³å®š]
    ShowLocationAlert -->|ä½¿ç”¨æ¨¡æ‹Ÿä½ç½®| UseSimulated[è®¾ç½®æ¨¡æ‹Ÿåæ ‡<br/>39.9042, 116.4074]
    ShowLocationAlert -->|é‡è¯•| RequestPerm
    ShowLocationAlert -->|å…³é—­å¼¹çª—| MarkDecided6[æ ‡è®°å·²å†³å®š]
    
    UseSimulated --> MarkDecided7[æ ‡è®°å·²å†³å®š]
    MarkDecided7 --> ShowSimulated[æ˜¾ç¤º: å·²ä½¿ç”¨æ¨¡æ‹Ÿä½ç½®]
    
    MarkDecided5 --> SkipPrompt2
    MarkDecided6 --> SkipPrompt2
    
    ShowSuccess --> ReadyToCheckin[å‡†å¤‡æ‰“å¡]
    ShowSimulated --> ReadyToCheckin
    ShowPermAlert --> ReadyToCheckin
    SkipPrompt1 --> ReadyToCheckin
    SkipPrompt2 --> ReadyToCheckin
    
    ReadyToCheckin --> UserClick[ç”¨æˆ·ç‚¹å‡»æ‰“å¡æŒ‰é’®]
    
    UserClick --> HasLocation{æœ‰ä½ç½®æ•°æ®?}
    HasLocation -->|æ˜¯| UseRealLocation[ä½¿ç”¨çœŸå®/æ¨¡æ‹Ÿåæ ‡]
    HasLocation -->|å¦ ä¸” å·²å†³å®š| UseDefault[ä½¿ç”¨é»˜è®¤åæ ‡ 0,0]
    HasLocation -->|å¦ ä¸” æœªå†³å®š| ShowFinalPrompt{æœ€åç¡®è®¤}
    
    ShowFinalPrompt -->|ç»§ç»­æ‰“å¡| MarkDecided8[æ ‡è®°å·²å†³å®š]
    ShowFinalPrompt -->|å–æ¶ˆ| UserClick
    
    MarkDecided8 --> UseDefault
    
    UseRealLocation --> CallAPI[è°ƒç”¨æ‰“å¡ API]
    UseDefault --> CallAPI
    
    CallAPI --> APISuccess{APIæˆåŠŸ?}
    APISuccess -->|æˆåŠŸ| CheckType{æ‰“å¡ç±»å‹}
    APISuccess -->|å¤±è´¥| ShowError[æ˜¾ç¤ºé”™è¯¯]
    
    CheckType -->|arrived| BackToNav[è¿”å›å¯¼èˆªé¡µé¢]
    CheckType -->|start_service| GoToService[è·³è½¬æœåŠ¡è¿›è¡Œä¸­é¡µé¢]
    CheckType -->|complete_service| GoToFeedback[è·³è½¬å®¢æˆ·è¯„ä»·é¡µé¢]
    
    ShowError --> UserClick
    
    style MarkDecided1 fill:#81c784
    style MarkDecided2 fill:#81c784
    style MarkDecided3 fill:#81c784
    style MarkDecided4 fill:#81c784
    style MarkDecided5 fill:#81c784
    style MarkDecided6 fill:#81c784
    style MarkDecided7 fill:#81c784
    style MarkDecided8 fill:#81c784
    style SkipPrompt1 fill:#ffeb3b
    style SkipPrompt2 fill:#ffeb3b
    style CallAPI fill:#2196f3
    style GoToService fill:#9c27b0
    style GoToFeedback fill:#4caf50
```

## ğŸ’¾ æ•°æ®åº“æ“ä½œæµç¨‹å›¾

```mermaid
graph TB
    CompleteCheckin[å®ŒæˆæœåŠ¡æ‰“å¡æˆåŠŸ] --> NavToFeedback[å¯¼èˆªåˆ°è¯„ä»·é¡µé¢<br/>ä¼ é€’è®¢å•ä¿¡æ¯]
    
    NavToFeedback --> LoadOrderData[åŠ è½½è®¢å•æ•°æ®<br/>orderId, customerName, etc.]
    LoadOrderData --> ShowForm[æ˜¾ç¤ºè¯„ä»·è¡¨å•]
    
    ShowForm --> UserFill[ç”¨æˆ·å¡«å†™]
    UserFill --> InputRating[é€‰æ‹©è¯„åˆ† 1-5æ˜Ÿ]
    InputRating --> InputTags[é€‰æ‹©æ ‡ç­¾ å¤šé€‰]
    InputTags --> InputNote[å¡«å†™å¤‡æ³¨ å¯é€‰]
    InputNote --> ClickSubmit[ç‚¹å‡»æäº¤]
    
    ClickSubmit --> Validate{éªŒè¯}
    Validate -->|è¯„åˆ†ä¸º0| ShowRatingError[æç¤º: è¯·é€‰æ‹©è¯„åˆ†]
    Validate -->|é€šè¿‡| PrepareData[å‡†å¤‡æ•°æ®]
    
    ShowRatingError --> UserFill
    
    PrepareData --> CreateRequest[åˆ›å»ºè¯·æ±‚å¯¹è±¡<br/>CustomerReviewCreateRequest]
    CreateRequest --> RequestData{è¯·æ±‚æ•°æ®}
    
    RequestData --> Rating[rating: number]
    RequestData --> Tags[tags: string[] or undefined]
    RequestData --> Note[private_note: string or undefined]
    
    Rating --> CallAPI[è°ƒç”¨ API<br/>POST /therapist/orders/{id}/customer-review]
    Tags --> CallAPI
    Note --> CallAPI
    
    CallAPI --> Backend[åç«¯æ¥æ”¶è¯·æ±‚]
    
    Backend --> Verify1[1. éªŒè¯è®¢å•å­˜åœ¨]
    Verify1 --> Verify2[2. éªŒè¯è®¢å•å±äºè¯¥æŠ€å¸ˆ]
    Verify2 --> Verify3[3. éªŒè¯è®¢å•å·²å®Œæˆ]
    Verify3 --> Verify4[4. æ£€æŸ¥æ˜¯å¦å·²è¯„ä»·è¿‡]
    
    Verify4 --> CheckResult{éªŒè¯ç»“æœ}
    CheckResult -->|å¤±è´¥| ReturnError[è¿”å›é”™è¯¯]
    CheckResult -->|æˆåŠŸ| CreateRecord[åˆ›å»ºè¯„ä»·è®°å½•]
    
    CreateRecord --> InsertDB[INSERT INTO<br/>therapist_customer_reviews]
    
    InsertDB --> DBData{æ•°æ®åº“å­—æ®µ}
    DBData --> Field1[therapist_id: è¯„ä»·è€…]
    DBData --> Field2[user_id: è¢«è¯„ä»·çš„å®¢æˆ·]
    DBData --> Field3[booking_id: å…³è”è®¢å• UNIQUE]
    DBData --> Field4[rating: 1-5æ˜Ÿ]
    DBData --> Field5[tags: JSONæ•°ç»„]
    DBData --> Field6[private_note: TEXT]
    DBData --> Field7[created_at: timestamp]
    
    Field1 --> CommitTX[æäº¤äº‹åŠ¡]
    Field2 --> CommitTX
    Field3 --> CommitTX
    Field4 --> CommitTX
    Field5 --> CommitTX
    Field6 --> CommitTX
    Field7 --> CommitTX
    
    CommitTX --> ReturnSuccess[è¿”å›æˆåŠŸå“åº”]
    
    ReturnError --> FrontendError[å‰ç«¯æ˜¾ç¤ºé”™è¯¯]
    ReturnSuccess --> FrontendSuccess[å‰ç«¯æ˜¾ç¤ºæˆåŠŸ]
    
    FrontendError --> ShowForm
    FrontendSuccess --> ShowSnackbar[æ˜¾ç¤º Snackbar<br/>è¯„ä»·æäº¤æˆåŠŸ]
    
    ShowSnackbar --> Wait[ç­‰å¾… 1.5 ç§’]
    Wait --> ResetNav[é‡ç½®å¯¼èˆªæ ˆ<br/>navigation.reset]
    ResetNav --> BackToHome[è¿”å›è®¢å•é¦–é¡µ<br/>Main]
    
    style CreateRecord fill:#4caf50
    style InsertDB fill:#2196f3
    style CommitTX fill:#81c784
    style ReturnSuccess fill:#66bb6a
    style BackToHome fill:#43a047
```

## ğŸ“ å…³é”®æ•°æ®ç»“æ„

### è®¢å•çŠ¶æ€æšä¸¾
```typescript
enum BookingStatus {
  PENDING = 'pending',        // å¾…æ¥å•
  CONFIRMED = 'confirmed',    // å·²ç¡®è®¤ï¼ˆæŠ€å¸ˆå·²æ¥å•ï¼‰
  EN_ROUTE = 'en_route',      // å·²å‡ºå‘ï¼ˆæŠ€å¸ˆå·²åˆ°è¾¾æ‰“å¡ï¼‰
  IN_PROGRESS = 'in_progress',// æœåŠ¡ä¸­ï¼ˆå¼€å§‹æœåŠ¡æ‰“å¡ï¼‰
  COMPLETED = 'completed',    // å·²å®Œæˆï¼ˆå®ŒæˆæœåŠ¡æ‰“å¡ï¼‰
  CANCELLED = 'cancelled',    // å·²å–æ¶ˆ
  REFUNDED = 'refunded'       // å·²é€€æ¬¾
}
```

### æ‰“å¡ç±»å‹
```typescript
type CheckInType = 'arrived' | 'start_service' | 'complete_service';
```

### å®¢æˆ·è¯„ä»·æ•°æ®
```typescript
interface CustomerReview {
  rating: number;              // 1-5æ˜Ÿè¯„åˆ†
  tags: string[];             // å¿«é€Ÿæ ‡ç­¾: ['å‡†æ—¶', 'ç¤¼è²Œ', ...]
  private_note: string;       // ç§å¯†å¤‡æ³¨ï¼ˆä»…ç®¡ç†å‘˜å¯è§ï¼‰
}
```

## ğŸ¯ å…³é”®æ—¶é—´èŠ‚ç‚¹

1. **created_at** - è®¢å•åˆ›å»ºæ—¶é—´
2. **therapist_arrived_at** - æŠ€å¸ˆåˆ°è¾¾æ—¶é—´ï¼ˆåˆ°è¾¾æ‰“å¡ï¼‰
3. **service_started_at** - æœåŠ¡å¼€å§‹æ—¶é—´ï¼ˆå¼€å§‹æœåŠ¡æ‰“å¡ï¼‰
4. **service_completed_at** - æœåŠ¡å®Œæˆæ—¶é—´ï¼ˆå®ŒæˆæœåŠ¡æ‰“å¡ï¼‰
5. **updated_at** - è®¢å•æ›´æ–°æ—¶é—´

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2024-12-28  
**ç»´æŠ¤è€…**: Landa Development Team

